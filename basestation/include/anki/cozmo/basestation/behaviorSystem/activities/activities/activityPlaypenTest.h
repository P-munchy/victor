/**
 * File: activityPlaypenTest.h
 *
 * Author: Al Chaussee
 * Created: 07/25/17
 *
 * Description:
 *
 * Copyright: Anki, Inc. 2017
 *
 **/

#ifndef __Cozmo_Basestation_BehaviorSystem_Activities_Activities_ActivityPlaypenTest_H__
#define __Cozmo_Basestation_BehaviorSystem_Activities_Activities_ActivityPlaypenTest_H__

#include "anki/cozmo/basestation/behaviorSystem/activities/activities/iActivity.h"

namespace Anki {
namespace Cozmo {

class IBehaviorPlaypen;

class ActivityPlaypenTest : public IActivity
{
public:
  
  ActivityPlaypenTest(Robot& robot, const Json::Value& config);
  virtual ~ActivityPlaypenTest();
  
  virtual Result Update(Robot& robot) override;
  
protected:
  virtual IBehaviorPtr ChooseNextBehaviorInternal(Robot& robot,
                                                  const IBehaviorPtr currentRunningBehavior) override;
  
  virtual void OnSelectedInternal(Robot& robot) override;
  
private:
  
  void HandleSuccess(Robot& robot);
  void HandleFailure(Robot& robot);
  
  using PlaypenBehavior = std::shared_ptr<IBehaviorPlaypen>;
  
  PlaypenBehavior _currentBehavior;
  
  // Motor calibration behavior always runs first and then we run whatever is in the vector of
  // playpen behaviors
  PlaypenBehavior _motorCalibBehavior;
  std::vector<PlaypenBehavior>::iterator _currentPlaypenBehaviorIter;
  std::vector<PlaypenBehavior> _playpenBehaviors;
  
};

} // namespace Cozmo
} // namespace Anki

#endif // __Cozmo_Basestation_BehaviorSystem_Activities_Activities_ActivityPlaypenTest_H__
