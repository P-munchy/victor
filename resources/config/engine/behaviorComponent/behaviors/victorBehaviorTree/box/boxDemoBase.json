{
  "behaviorID" : "BoxDemoBase",
  "behaviorClass" : "BoxDemo",

  "associatedActiveFeature": "NoFeature",

  "initialState": "BootUp",

  "states": [
    {
      "name": "BootUp",
      "behavior": "BoxDemoBoot"
    },
    {
      "name": "PersonDetector",
      "behavior": "BoxDemoFaceTracking"
    },
    {
      "name": "WaitForAlexaPutDown",
      "behavior": "Wait"
    },
    {
      "name": "WaitForPersonDetectorPutDown",
      "behavior": "Wait"
    },
    {
      "name": "Alexa",
      "behavior": "BoxDemoAlexa",
      "getInBehavior": "BoxDemoAlexaGetIn"
    }
  ],

  "transitionDefinitions": [
    {
      "from": "BootUp",
      "exitTransitions": [
        {
          "to": "WaitForAlexaPutDown",
          "condition": {
            "conditionType": "TrueCondition"
          }
        }
      ]
    },

    {
      "from": "PersonDetector",
      "interruptingTransitions": [
        {
          "to": "WaitForAlexaPutDown",
          "condition": {
            "conditionType": "RobotShaken"
          }
        }
      ]
    },

    {
      "from": "WaitForAlexaPutDown",
      "interruptingTransitions": [
        {
          "to": "Alexa",
          "condition": {
            "conditionType": "Compound",
            "not":{ 
              "conditionType": "Compound",           
              "or": [
                {
                  "conditionType": "RobotShaken"
                },
                {
                  "conditionType": "BeingHeld",
                  "shouldBeHeld": true
                }
              ]
            }
          }
        }
      ]
    },

    {
      "from": "Alexa",
      "nonInterruptingTransitions": [
        {
          "to": "WaitForPersonDetectorPutDown",
          "condition": {
            "conditionType": "RobotShaken"
          }
        }
      ]
    },

    {
      "from": "WaitForPersonDetectorPutDown",
      "interruptingTransitions": [
        {
          "to": "PersonDetector",
          "condition": {
            "conditionType": "Compound",
            "not":{ 
              "conditionType": "Compound",           
              "or": [
                {
                  "conditionType": "RobotShaken"
                },
                {
                  "conditionType": "BeingHeld",
                  "shouldBeHeld": true
                }
              ]
            }
          }
        }
      ]
    }
  ]
}
