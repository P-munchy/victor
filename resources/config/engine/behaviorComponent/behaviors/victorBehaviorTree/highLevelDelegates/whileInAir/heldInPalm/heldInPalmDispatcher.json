{
  "behaviorID": "HeldInPalmDispatcher",
  "behaviorClass" : "DispatcherQueue",
  
  "associatedActiveFeature": "HeldInPalm",

  // NOTE: The InAir tread state requirement is enforced in WhileInAirDispatcher
  "wantsToBeActivatedCondition": {
    "conditionType": "Compound",
    "and": [
      {
        // No point in trying to look around if being held by body, rather than
        // held in hand.
        "conditionType": "Compound",
        "not": {
          "conditionType": "CliffDetected"
        }
      },
      {
        "conditionType": "FeatureGate",
        "feature": "HeldInPalm",
        "expected": true
      }
    ]
  },

  // TODO: Remove this condition when the behaviors below have their own individual
  // ways of dealing with the sudden appearance of a cliff.
  // The turn in place actions commanded by FindFaces might cause the robot to rotate
  // into a position where we could almost fall off the user's hand, so for now, stop
  // all motion if we start detecting cliffs.
  "wantsToCancelSelfCondition": {
    "conditionType": "CliffDetected"
  },

  "behaviors": [
    "InitialHeldInPalmAnimationInternal",
    "HeldInPalmResponses"
  ],
  
  "anonymousBehaviors": [
    {
      "behaviorName": "InitialHeldInPalmAnimationInternal",
      "behaviorClass" : "AnimSequence",
      
      // TODO(GB): Change to corresponding "initial held-in-palm" animation
      "animTriggers": ["ReactToPickupInitial"]
    }
  ]
}
