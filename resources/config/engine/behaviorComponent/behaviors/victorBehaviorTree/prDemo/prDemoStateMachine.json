{
  "behaviorID": "PRDemoStateMachine",
  "behaviorClass": "PRDemo",

  "wantsToBeActivatedCondition": {
    "conditionType": "FeatureGate",
    "feature": "PRDemo"
  },

  "states": [
    {
      "name": "Init",
      // special initial state to drive off the charger if needed
      "behavior": "Socialize"
    },
    {
      "name": "Socialize",
      // TODO:(bn) custom
      "behavior": "Socialize"
    },
    {
      "name": "Exploring",
      // TODO:(bn) explore forever
      "behavior": "PRDemoExploring",
      "getInBehavior": "ExploringGetIn",
      "activateIntent": "explore_start"
    },
    {
      "name": "Observing",
      "behavior": "PRDemoObserving"

      // TEMP: might not need this
      // "cancelSelf": true
    },
    {
      "name": "ReturningToCharger",
      "behavior": "FindAndGoToHome",
      "activateIntent": "system_charger"
    }
  ],

  "initialState": "Init",

  "transitionDefinitions": [

    {
      "from": "Init",
      "nonInterruptingTransitions": [
        {
          "to": "Socialize",
          "condition": {
            "conditionType": "Compound",
            "not": {
              "conditionType": "OnCharger"
            }
          }
        }
      ],
      "exitTransitions": [
        {
          "to": "Socialize",
          "condition": {
            "conditionType": "TrueCondition"
          }
        }
      ]
    },

    {
      "from": [
        "Init",
        "Socialize",
        "Observing",
        "ReturningToCharger"
      ],
      "interruptingTransitions": [
        {
          "to": "Exploring",
          "condition": {
            "conditionType": "UserIntentPending",
            "list": [
              {"type": "explore_start"}
            ]
          }
        }
      ]
    },

    {
      "from": [
        "Socialize",
        "Exploring"
      ],
      "interruptingTransitions": [
        {
          "to": "Observing",
          "condition": {
            "conditionType": "OnCharger"
          }
        }
      ]
    },


    {
      "from": [
        "Init",
        "Socialize",
        "Exploring",
        "Observing",
        "ReturningToCharger"
      ],
      "interruptingTransitions": [
        {
          "to": "ReturningToCharger",
          "condition": {
            "conditionType": "UserIntentPending",
            "list": [
              {"type": "system_charger"}
            ]
          }
        }
      ]
    },

    {
      "from": "ReturningToCharger",
      "exitTransitions": [
        {
          "to": "Observing",
          "condition": {
            "conditionType": "TrueCondition"
          }
        }
      ]
    }
  ]
}
