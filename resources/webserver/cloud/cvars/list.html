<html>
<title>Cloud process console variables</title>
<h2>Console variables</h2>
<script>

function submitRequest(name, valueId) {
    var req = new XMLHttpRequest();
    var value = document.getElementById(valueId).value;
    req.open("GET", "cvars/req?name=" + encodeURIComponent(name) + "&value=" + encodeURIComponent(value));
    req.onload = function(ev) {
        var response = req.response
        if (!response) {
            return
        }
        if (typeof response === "string") {
            response = JSON.parse(response)
        }

        var respElem = document.getElementById(valueId + '-resp');
        if (response.error) {
            respElem.innerHTML = '<font color="red">' + response.error + '</font>';
        }
        else {
            respElem.innerText = response.response;
        }
    };
    req.send();
    return false;
}

</script>

{{range $k, $v := .}}
    {{ $v.HTML $k }}
{{end}}
</html>
