#VRML_SIM V7.3.0 utf8

PROTO Block1x1 [
  field SFString name "Block000"
  field SFString type "1" # BlockType
  field SFVec3f translation 0 0 0.022
  field SFRotation rotation 0 0 1 0
  field SFFloat density 250
  field SFColor blockColor 1 0 0
  field SFBool  useWhiteMarkerBackgrounds TRUE
  field SFString markerImg ""  # Image path relative to textures/
]
{
Robot {

  # Set markerURL
  %{
    markerURL = ""
    if fields.markerImg ~= "" then
      markerURL = "textures/" .. fields.markerImg
    end 
  }%

  name IS name
  model IS type
  translation IS translation
  rotation IS rotation
  contactMaterial "cmat_block"
  children [
		
		# Front Face
		VisionMarker {
			rotation 0 0 1 -1.5708
			translation -0.022 0 0
			image IS markerImg
			connectorName "connectorFront"
			connectorRotation 0 1 0 -1.57079
		}
		
		# Back Face
		VisionMarker {
			rotation 0 0 1 1.5708
			translation 0.022 0 0
			image IS markerImg
			connectorName "connectorBack"
			connectorRotation 0 1 0 1.57079
		}
		
		# Bottom Face
		VisionMarker {
			rotation 1 0 0 1.5708
			translation 0 0 -0.022
			image IS markerImg
			connectorName "connectorBottom"
			connectorRotation 0 1 0 3.14159
		}
		
		# Top Face
		VisionMarker {
			rotation 1 0 0 1.5708
			translation 0 0 0.022
			image IS markerImg
			connectorName "connectorTop"
			connectorRotation 0 1 0 0
		}
						
		# Left Face
		VisionMarker {
			rotation 0 0 1 3.1415
			translation 0 0.022 0
			image IS markerImg
			connectorName "connectorLeft"
			connectorRotation 1 0 0 -1.57079
		}
		
		# Right Face
		VisionMarker {
			rotation 0 0 1 0
			translation 0 -0.022 0
			image IS markerImg
			connectorName "connectorRight"
			connectorRotation 1 0 0 1.57079
		}

    DEF Block1x1Shape Shape {
      appearance Appearance {
        material Material {
          diffuseColor IS blockColor
        }
      }
      geometry Box {
        size 0.044 0.044 0.044
      }
    }
    

  ] # Block Children
  
  boundingObject USE Block1x1Shape
  physics DEF Block1x1Physics Physics {
    density IS density
  }
} # "Robot" (the actual block)

  
} # PROTO