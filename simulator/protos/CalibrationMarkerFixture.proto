#VRML_SIM V7.3.0 utf8

PROTO CalibrationMarkerFixture [
  field SFString name "CalibrationMarkerFixture"

  field SFVec3f       translation  0 0 0.025
  field SFRotation    rotation     0 0 1 0

  field SFFloat markerWidth 0.05
  field SFFloat markerAngle 0.4487989505
]
{
Solid {

  name IS name

  translation IS translation
  rotation IS rotation

  children [

    %{ 
      numMarkers = 3.1415 / fields.markerAngle.value
      hypot = (fields.markerWidth.value * 0.5) / (math.tan(fields.markerAngle.value * 0.5))
      for i=0,numMarkers do 
        x = math.cos(fields.markerAngle.value * i) * hypot
        y = math.sin(fields.markerAngle.value * i) * hypot
    }%


    # Right
    CalibrationMarker {
      translation %{= x }% %{= -y}% 0
      rotation 0 0 1 %{=fields.markerAngle.value * -i + 3.1415/2}%
      image "customSDK/SDK_2Circles.png"
    }

    %{ 
        prevX = x
        prevY = y
      end 
    }%


  ] # Solid Children

} # Parent Solid


} # PROTO

